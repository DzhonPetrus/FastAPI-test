{% extends "base.html" %}
{% block title %}
    USER - {{ user.id }}
{% endblock %}

{% block content %}
    <h1>USERS</h1>
    <ul>
    {% for user in users %}
        <li>{{user.id}}</li>
        <li>{{user.name}}</li>
        <li>{{user.email}}</li>
        <br>
    {% endfor %}
    </ul>

    <form onsubmit="event.preventDefault(); createUser()">
        Name:
        <input type="text" name="name", id="name">
        <br>
        Email:
        <input type="email" name="email" id="email">
        <br>
        Password:
        <input type="password" name="password" id="password">
        <br>
        <input type="submit" value="submit">
    </form>
{% endblock %}

{% block scripts %}
<script>
    async function createUser() {
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        const data = {name,email,password};

        const response = await fetch('http://127.0.0.1:8000/user', {
                method: 'POST',
                mode: 'cors',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
        });

        console.log(response.json());
    }
</script>
{% endblock %}